generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id                 Int                  @id @default(autoincrement())
  username           String
  phone              String               @unique
  created_at         DateTime             @default(now())
  updated_at         DateTime             @updatedAt
  Awesome            Awesome[]
  Cute               Cute[]
  EventParticipation EventParticipation[]
  EventWinner        EventWinner[]
  Like               Like[]
  posts              Post[]
  Surprise           Surprise[]
}

model Post {
  id              Int        @id @default(autoincrement())
  user_id         Int
  event_photo     String
  landscape_photo String
  created_at      DateTime   @default(now())
  Awesome         Awesome[]
  Cute            Cute[]
  Like            Like[]
  user            User       @relation(fields: [user_id], references: [id])
  Surprise        Surprise[]
}

model Event {
  id                 Int                  @id @default(autoincrement())
  location           String
  hint               String
  quest_photo        String
  created_at         DateTime             @default(now())
  EventParticipation EventParticipation[]
  EventWinner        EventWinner[]
}

model Awesome {
  id         Int      @id @default(autoincrement())
  user_id    Int
  post_id    Int
  created_at DateTime @default(now())
  Post       Post     @relation(fields: [post_id], references: [id])
  User       User     @relation(fields: [user_id], references: [id])
}

model Cute {
  id         Int      @id @default(autoincrement())
  user_id    Int
  post_id    Int
  created_at DateTime @default(now())
  Post       Post     @relation(fields: [post_id], references: [id])
  User       User     @relation(fields: [user_id], references: [id])
}

model EventParticipation {
  id       Int   @id @default(autoincrement())
  user_id  Int
  event_id Int
  Event    Event @relation(fields: [event_id], references: [id])
  User     User  @relation(fields: [user_id], references: [id])
}

model EventWinner {
  id       Int   @id @default(autoincrement())
  user_id  Int
  event_id Int
  Event    Event @relation(fields: [event_id], references: [id])
  User     User  @relation(fields: [user_id], references: [id])
}

model Like {
  id         Int      @id @default(autoincrement())
  user_id    Int
  post_id    Int
  created_at DateTime @default(now())
  Post       Post     @relation(fields: [post_id], references: [id])
  User       User     @relation(fields: [user_id], references: [id])
}

model Surprise {
  id         Int      @id @default(autoincrement())
  user_id    Int
  post_id    Int
  created_at DateTime @default(now())
  Post       Post     @relation(fields: [post_id], references: [id])
  User       User     @relation(fields: [user_id], references: [id])
}
